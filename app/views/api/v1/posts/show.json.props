json.status do
  json.code 200
  json.message "Fetched post #{@post.id} successfully"
end

json.data do
  json.id @post.id
  json.title @post.title
  json.body @post.body
  json.channel_id @post.channel_id
  json.comment_count @post.comments.count
  json.created_at @post.created_at
  json.updated_at @post.updated_at

  json.owner_details do
    json.id @post.user.id
    json.username @post.user.username
  end

  json.channel_details do
    json.id @post.channel.id
    json.title @post.channel.title
  end

  json.comments @post.comments.order(created_at: :desc).map { |comment|
    {
      id: comment.id,
      body: comment.body,
      created_at: comment.created_at,
      owner: {
        id: comment.user.id,
        username: comment.user.username
      }
    }
  }
end